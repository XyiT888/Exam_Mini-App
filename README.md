# 项目概述

本项目是一个简单的考试小应用，包含开始界面、考试须知界面、答题界面和结果界面。用户可以通过点击按钮在不同界面之间切换，进行答题操作，系统会根据用户的答题情况计算得分并显示最终结果。



# 整体架构设计

## 1. 文件结构

**`index.html`**：包含整个应用的 HTML 结构，定义了各个界面的布局。

**`css/index.css`**：负责应用的样式设计，包括按钮样式、界面布局、进度条样式等。

**`script.js`**：实现应用的交互逻辑，如界面切换、题目加载、答案判断、计时等。



## 2. 数据结构

**`data`数组**：存储所有的题目信息，每个题目对象包含题目 ID、问题描述、正确答案和选项列表。



## 3. 状态管理

**`currentQuestionIndex`**：记录当前正在显示的题目索引。

**`score`**：记录用户的得分。

**`timer`**：存储计时器的 ID，用于控制计时操作。

**`timeLeft`**：记录当前题目的剩余答题时间。



# 界面设计与实现

## 1. 开始界面

### **功能**

显示一个 “开始考试” 按钮，点击该按钮后**跳转**到考试须知界面。

### **实现**

- HTML 中定义按钮元素 `<button id="start-btn">开始考试</button>`。

- CSS 中设置按钮的样式，包括背景颜色、字体颜色、边框圆角、阴影效果等。

- JavaScript 中添加点击事件监听器，调用 `showScreen('instructions')` 函数切换到考试须知界面。

  

## 2. 考试须知界面

### **功能**

显示考试的相关须知，包括答题时间限制、答案选择规则等。提供 “退出考试” 和 “继续考试” 两个按钮，点击 “退出考试” 返回开始界面，点击 “继续考试” 进入答题界面。

### **实现**

- 将整个界面大致分为三块区域：界面标题、须知内容和按钮组。
- CSS 中设置界面的布局、分隔线样式、按钮样式等。鼠标悬停时有变色效果。
- JavaScript 中为 “退出考试” 和 “继续考试” 按钮添加点击事件监听器，分别调用 `showScreen('start')` 和 `showScreen('quiz')` 函数进行界面切换。



## 3. 答题界面

### **功能**

显示当前题目、选项、剩余答题时间和进度条。用户选择答案后，系统会判断答案的正确性并显示相应的样式，同时停止计时，不能再选择。若一直没有选择，答题时间结束后自动显示正确答案。显示“下一题”按钮。点击 “下一题” 按钮进入下一题。

### **实现**

- 将整个答题界面大致分为三块区域：最上方是界面标题、倒计时组和时间进度条，中间是题目以及选项，最下方是按钮组。
- **题目加载**：`loadQuestion` 函数根据 `currentQuestionIndex` 从 `data` 数组中获取当前题目信息，将题目文本和选项显示在页面上，并重置计时器和进度条。
- **答案选择**：`selectOption` 函数处理用户选择答案的逻辑，禁用所有选项，判断答案的正确性，添加相应的样式（正确或错误），更新得分，显示 “下一题” 按钮并停止计时。
- **计时功能**：`startTimer` 函数启动计时器，每秒更新剩余时间和进度条，时间到后调用 `timeUp` 函数显示正确答案并显示 “下一题” 按钮。
- **下一题操作**：`nextQuestion` 函数将 `currentQuestionIndex` 加 1，如果还有题目则加载下一题并开始计时，否则显示结果界面。

### **遇到的问题**

1. 选择后，还可以选择其他选项。

   在js中只设置了选择选项后，鼠标变为禁用的样式，并没有禁止点击事件的发生。如下设置禁用点击事件即可解决。

   ```js
   opt.style.pointerEvents = 'none'; // 禁用点击事件
   ```

2. 选择选项后，选项高度变化了，为什么？

```css
.option.incorrect::after {
  float: right;
  background-image: url('../img/error.png');
}`
```

因为 `::after` 伪元素默认是 `inline` 的，`float` 会让元素脱离正常文档流，但父元素仍然会计算浮动元素的高度（除非使用 `overflow: hidden` 或 `clearfix`）。

修改后如下：

```css
.option.incorrect::after,
.option.correct::after {
    content: '';
    width: 20px;
    height: 20px;
    background-size: contain;
    background-repeat: no-repeat;
}

.option.incorrect::after {
    background-image: url('../img/error.png');
}
```

在修改后的代码中，`.option.incorrect::after` 和 `.option.correct::after` 都被明确地定义了 `width` 和 `height`，并且为 `20px`，固定伪元素的尺寸，不会因为内容或其他因素而改变。添加了 `background-size: contain`这个属性，确保背景图像在伪元素的边界内完整显示，同时保持图像的宽高比例，避免背景图像因尺寸问题而影响伪元素的大小。

在原始代码中，`.option.incorrect::after` 只定义了 `float` 和 `background-image`，但没有明确指定伪元素的尺寸。这可能导致浏览器默认使用背景图像的原始尺寸来渲染伪元素，而背景图像的尺寸可能与选项的预期高度不一致，从而导致选项高度变化。



## 4. 结果界面

### **功能**

显示用户的最终得分，并提供 “重新考试” 和 “退出考试” 两个按钮，点击 “重新考试” 重置考试状态并回到答题界面，点击 “退出考试” 返回开始界面。

### **实现**

- HTML 中显示得分信息和按钮。
- CSS 中设置界面的样式。
- JavaScript 中 `showResult` 函数根据用户的得分显示相应的结果信息，为 “重新考试” 和 “退出考试” 按钮添加点击事件监听器，分别调用 `resetQuiz` 和 `showScreen` 函数进行相应操作。

### **遇到的问题**

1. 在点击“退出考试”按钮时，并不能退出到开始考试界面，即点击该按钮没有反应？

   因为考试须知界面的退出按钮和结果界面的退出按钮执行的功能是一样的，所以我将两个按钮设置了相同的ID，但在HTML中，ID应该是唯一的，重复的ID会导致JavaScript只能获取到第一个匹配的元素。重新设置结果界面的退出按钮ID即可解决。

2. 在点击“退出考试”按钮后，回到开始界面，点击“开始考试”，“继续考试”后，直接到第五题，还在上一次答题结束的状态，并没有重置，而且进度为7/5。

   针对状态没有重置的问题，在事件监听时，点击结果界面的退出考试按钮时应该重置状态。

   ```js
   jgexitBtn.addEventListener('click', () => {
       resetQuiz();
       showScreen('start');
   });
   ```

   针对进度显示的问题，`resetQuiz（）`函数中，没有重置进度。

   在函数中添加，`document.getElementById('schedule-num').textContent = '1';`即可解决。

## 5. 总体分析设计

开始界面只有按钮，其他界面都是组合的，那么可以把除了开始界面的其他界面均设置为`screen`类。

考试须知界面“退出考试”按钮的逻辑与结果界面“退出考试”按钮的逻辑均为：回到开始界面，因此，两个按钮可以设置为`btn`类。

考试须知界面“继续考试”按钮的逻辑与结果界面“重新考试”按钮的逻辑均为：回到答题，因此，两个按钮可以设置为`btn primary` 类。



# 交互设计与实现

## 1. 界面切换

**`showScreen` 函数**：根据传入的屏幕名称参数，显示指定的屏幕。对于开始界面，使用 `style.display` 属性控制显示和隐藏；对于其他界面，通过添加或移除 `active` 类来控制显示和隐藏。



## 2. 答题交互

**选择答案**：用户点击选项时，调用 `selectOption` 函数，该函数会禁用所有选项，判断答案的正确性，添加相应的样式，更新得分，显示 “下一题” 按钮并停止计时。

**计时交互**：使用 `setInterval` 函数实现计时功能，每秒更新剩余时间和进度条。时间到后调用 `timeUp` 函数，该函数会禁用所有选项，显示正确答案并显示 “下一题” 按钮。

**下一题操作**：点击 “下一题” 按钮时，调用 `nextQuestion` 函数，该函数会将 `currentQuestionIndex` 加 1，如果还有题目则加载下一题并开始计时，否则显示结果界面。



## 3. 结果显示与重置

**结果显示**：`showResult` 函数根据用户的得分显示相应的结果信息，将得分信息显示在页面上。

**重置考试**：`resetQuiz` 函数将 `currentQuestionIndex`、`score` 、`timeLeft`和`currentQuestionEl.textContent` 重置为初始值，清除计时器。
